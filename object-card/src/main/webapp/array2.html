<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="content-language" content="ja">
  <meta charset="UTF-8">
  <script type="text/javascript" src="dwr/engine.js"></script>
  <script type="text/javascript" src="dwr/util.js"></script>
  <script type="text/javascript" src="js/jquery-3.4.1.slim.min.js"></script>
  <script type="text/javascript" src="js/jquery.serialize.js"></script>
  <script type="text/javascript" src="dwr/interface/CardPrinter.js"></script>
  <script type="text/javascript">
    function update() {
      CardPrinter.execute({
        callback: function (data) {
          $('#error_message').text("");
          console.log(data);
          var player_text = "";
          data.forEach(function (player) {
            player_text = player_text + "[no]" + player.no + "[name]" + player.name + "<br/>";
          });
          $('#pprinterReply').html(player_text);
        },
        errorHandler: updateErrorMessage
      });
    }
    function updateErrorMessage(message, exception) {
      $('#error_message').text(message);
      $('#pprinterReply').text("");
    }
    function insertArray() {
      var playerArray = [{ no: 3, name: "hukusho" }, { no: 4, name: "sue-chan" }];
      CardPrinter.insertPlayer(playerArray, {
        callback: function () {
          console.log("insert_player実行完了")
        },
        errorHandler: updateErrorMessage
      });
    }
    function insertCards() {
      var deck = { "name": "user1", "cards": [0, 2, 4, 1, 3] };
      CardPrinter.insertDeck(deck, {
        callback: function () {
          console.log("insertDeck実行完了")
        },
        errorHandler: updateErrorMessage
      });
    }
  </script>
</head>

<body>
  <p>
    <form id="pprinter_form">
      <input value="GetPlayerList" type="button" onclick="update()" />
      <input value="InsertArray" type="button" onclick="insertArray()" />
      <input value="InsertCards" type="button" onclick="insertCards()" />
    </form>
  </p>
  <p>
    Reply: <span id="pprinterReply"></span>
  </p>
  <p>
    <span id="error_message" class="error"></span>
  </p>
</body>

</html>
